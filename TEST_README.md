# LMS 시스템 테스트 가이드

이 문서는 LMS(학습 관리 시스템)의 테스트 실행 방법과 테스트 구조에 대한 설명을 제공합니다.

## 테스트 환경 설정

테스트를 실행하기 위해 필요한 패키지를 설치합니다:

\`\`\`bash
npm install --save-dev @testing-library/jest-dom @testing-library/react @testing-library/user-event jest jest-environment-jsdom ts-jest @types/jest
\`\`\`

## 테스트 실행 방법

다음 명령어를 사용하여 테스트를 실행할 수 있습니다:

### 모든 테스트 실행

\`\`\`bash
npm test
\`\`\`

### 테스트 감시 모드 실행 (파일 변경 시 자동 재실행)

\`\`\`bash
npm run test:watch
\`\`\`

### 테스트 커버리지 보고서 생성

\`\`\`bash
npm run test:coverage
\`\`\`

## 테스트 구조

테스트 파일은 `__tests__` 디렉토리에 위치하며, 다음과 같은 구조로 구성되어 있습니다:

\`\`\`
__tests__/
  ├── actions/                # 서버 액션 테스트
  ├── components/             # 컴포넌트 테스트
  │   ├── admin/              # 관리자 컴포넌트 테스트
  │   ├── auth/               # 인증 관련 컴포넌트 테스트
  │   └── student/            # 학생 컴포넌트 테스트
  ├── lib/                    # 유틸리티 함수 테스트
  └── utils/                  # 테스트 유틸리티
\`\`\`

## 테스트 유형

1. **단위 테스트**: 개별 함수와 컴포넌트의 기능을 테스트합니다.
2. **통합 테스트**: 여러 컴포넌트나 함수가 함께 작동하는 방식을 테스트합니다.
3. **스냅샷 테스트**: UI 컴포넌트의 렌더링 결과가 예상대로인지 확인합니다.

## 모킹 전략

테스트에서는 다음과 같은 외부 의존성을 모킹합니다:

1. **Supabase 클라이언트**: 데이터베이스 작업을 시뮬레이션합니다.
2. **Next.js 라우팅**: `useRouter`, `redirect` 등의 함수를 모킹합니다.
3. **서버 액션**: 서버 액션 함수의 동작을 시뮬레이션합니다.
4. **차트 라이브러리**: Recharts 컴포넌트를 간단한 div로 대체합니다.

## 테스트 커버리지 목표

- **라인 커버리지**: 80% 이상
- **함수 커버리지**: 90% 이상
- **브랜치 커버리지**: 75% 이상

## 테스트 작성 가이드라인

1. 각 컴포넌트와 함수에 대해 최소한 다음 테스트를 작성합니다:
   - 정상 동작 테스트
   - 에러 처리 테스트
   - 경계 조건 테스트

2. 컴포넌트 테스트에서는 다음 사항을 확인합니다:
   - 올바른 렌더링
   - 사용자 상호작용 처리
   - 상태 변경
   - 프롭스 변경에 따른 동작

3. 서버 액션 테스트에서는 다음 사항을 확인합니다:
   - 입력 유효성 검사
   - 데이터베이스 작업
   - 에러 처리
   - 반환 값
